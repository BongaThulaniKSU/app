<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üêî Lusungulo - Fresh Broilers</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #2e7d32, #1b5e20);
            padding: 20px;
        }
        
        .app {
            max-width: 500px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        
        h1 {
            color: #2e7d32;
            text-align: center;
            margin-bottom: 10px;
        }
        
        .stock-box {
            background: #4caf50;
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        .deal {
            background: linear-gradient(45deg, #ff6b6b, #ff8e53);
            color: white;
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            font-weight: bold;
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }
        
        button {
            width: 100%;
            padding: 14px;
            background: #2e7d32;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            margin: 10px 0;
            cursor: pointer;
        }
        
        button:hover {
            background: #1b5e20;
        }
        
        .admin-btn {
            background: #757575;
        }
        
        .admin-section {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
        }
        
        .price-box {
            background: #fff3e0;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-size: 22px;
            font-weight: bold;
            color: #ff9800;
            margin: 20px 0;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 350px;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <div class="app">
        <h1>üêî LUSUNGULO</h1>
        <p style="text-align: center; color: #666;">Fresh Broilers - No Firebase!</p>
        
        <div class="deal">
            üéâ BUY 2 MEDIUM, GET 1 SMALL FREE! üéâ
        </div>
        
        <div class="stock-box" id="stockDisplay">
            üêî Loading...
        </div>
        
        <h3>üìù Place Order</h3>
        
        <input type="text" id="name" placeholder="Full Name">
        <input type="tel" id="phone" placeholder="Phone Number">
        <input type="text" id="address" placeholder="Delivery Address">
        
        <select id="size">
            <option value="">-- Select Size --</option>
            <option value="1.5">Small (1.5kg) - E67.50</option>
            <option value="2.0">Medium (2.0kg) - E90.00</option>
            <option value="2.5">Large (2.5kg) - E112.50</option>
        </select>
        
        <input type="number" id="quantity" value="1" min="1">
        
        <div class="price-box" id="totalPrice">
            Total: E0.00
        </div>
        
        <button onclick="placeOrder()">üì± PLACE ORDER</button>
        <button onclick="showAdminLogin()" class="admin-btn">üëë ADMIN LOGIN</button>
        
        <div id="adminSection" class="admin-section">
            <h3>üëë Admin Panel</h3>
            <button onclick="logoutAdmin()" style="background: #f44336;">Logout</button>
            
            <h4>üì¶ Current Stock</h4>
            <div id="adminStock"></div>
            
            <h4>‚ûï Add Stock</h4>
            <select id="addSize">
                <option value="1.5">Small (1.5kg)</option>
                <option value="2.0">Medium (2.0kg)</option>
                <option value="2.5">Large (2.5kg)</option>
            </select>
            <input type="number" id="addQty" placeholder="Quantity">
            <button onclick="addStock()" style="background: #4caf50;">Add Stock</button>
            
            <h4>‚úèÔ∏è Adjust Stock</h4>
            <select id="adjustSize">
                <option value="1.5">Small (1.5kg)</option>
                <option value="2.0">Medium (2.0kg)</option>
                <option value="2.5">Large (2.5kg)</option>
            </select>
            <div style="display: flex; gap: 5px;">
                <button onclick="adjustStock(-1)" style="background: #ff9800;">-1</button>
                <button onclick="adjustStock(-5)" style="background: #ff9800;">-5</button>
                <button onclick="adjustStock(1)" style="background: #4caf50;">+1</button>
                <button onclick="adjustStock(5)" style="background: #4caf50;">+5</button>
            </div>
            
            <h4>üìã Recent Orders</h4>
            <div id="ordersList"></div>
        </div>
    </div>
    
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <h3>Admin Login</h3>
            <input type="password" id="password" placeholder="Password">
            <button onclick="verifyAdmin()">Login</button>
            <button onclick="closeModal()" style="background: #f44336;">Cancel</button>
            <p style="margin-top: 10px;">Password: admin123</p>
        </div>
    </div>

    <script>
        // ============ NO FIREBASE! ALL DATA STORED LOCALLY ============
        
        // Initialize stock data
        let stock = {
            '1.5': { quantity: 50, price: 45 },
            '2.0': { quantity: 35, price: 45 },
            '2.5': { quantity: 20, price: 45 }
        };
        
        let orders = [];
        let currentPayment = 'momo';
        
        // Load saved data
        function loadData() {
            const savedStock = localStorage.getItem('lusungulo_stock');
            if (savedStock) {
                stock = JSON.parse(savedStock);
            }
            
            const savedOrders = localStorage.getItem('lusungulo_orders');
            if (savedOrders) {
                orders = JSON.parse(savedOrders);
            }
            
            updateStockDisplay();
        }
        
        // Save data
        function saveData() {
            localStorage.setItem('lusungulo_stock', JSON.stringify(stock));
            localStorage.setItem('lusungulo_orders', JSON.stringify(orders));
        }
        
        // Update stock display
        function updateStockDisplay() {
            let total = 0;
            total += stock['1.5'].quantity;
            total += stock['2.0'].quantity;
            total += stock['2.5'].quantity;
            
            document.getElementById('stockDisplay').innerHTML = `üêî Available Birds: ${total}`;
            
            // Admin stock view
            if (document.getElementById('adminSection').style.display === 'block') {
                let html = '';
                html += `<div style="display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid #ddd;">
                            <span><strong>1.5kg</strong> (E${stock['1.5'].price}/kg)</span>
                            <span style="font-size: 20px;">${stock['1.5'].quantity}</span>
                        </div>`;
                html += `<div style="display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid #ddd;">
                            <span><strong>2.0kg</strong> (E${stock['2.0'].price}/kg)</span>
                            <span style="font-size: 20px;">${stock['2.0'].quantity}</span>
                        </div>`;
                html += `<div style="display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid #ddd;">
                            <span><strong>2.5kg</strong> (E${stock['2.5'].price}/kg)</span>
                            <span style="font-size: 20px;">${stock['2.5'].quantity}</span>
                        </div>`;
                document.getElementById('adminStock').innerHTML = html;
            }
            
            updatePrice();
        }
        
        // Update price
        function updatePrice() {
            const size = document.getElementById('size').value;
            const qty = parseInt(document.getElementById('quantity').value) || 1;
            
            if (!size || !stock[size]) {
                document.getElementById('totalPrice').innerHTML = 'Total: E0.00';
                return;
            }
            
            const total = parseFloat(size) * stock[size].price * qty;
            document.getElementById('totalPrice').innerHTML = `Total: E${total.toFixed(2)}`;
        }
        
        // Place order
        function placeOrder() {
            const name = document.getElementById('name').value;
            const phone = document.getElementById('phone').value;
            const address = document.getElementById('address').value;
            const size = document.getElementById('size').value;
            const qty = parseInt(document.getElementById('quantity').value);
            
            if (!name || !phone || !address || !size) {
                alert('Please fill all fields');
                return;
            }
            
            if (!stock[size] || stock[size].quantity < qty) {
                alert(`Only ${stock[size]?.quantity || 0} birds available`);
                return;
            }
            
            const total = parseFloat(size) * stock[size].price * qty;
            const tracking = 'LS' + Date.now().toString().slice(-8);
            
            // Update stock
            stock[size].quantity -= qty;
            
            // Save order
            const order = {
                name, phone, address,
                size, qty,
                total: total.toFixed(2),
                tracking,
                status: 'pending',
                timestamp: new Date().toLocaleString()
            };
            
            orders.unshift(order);
            saveData();
            updateStockDisplay();
            
            alert(`‚úÖ Order placed! Tracking: ${tracking}`);
            
            // Clear form
            document.getElementById('name').value = '';
            document.getElementById('phone').value = '';
            document.getElementById('address').value = '';
            document.getElementById('quantity').value = '1';
            document.getElementById('size').value = '';
            updatePrice();
            
            // Update orders list if admin is logged in
            if (document.getElementById('adminSection').style.display === 'block') {
                displayOrders();
            }
        }
        
        // Admin functions
        function showAdminLogin() {
            document.getElementById('loginModal').style.display = 'flex';
        }
        
        function closeModal() {
            document.getElementById('loginModal').style.display = 'none';
        }
        
        function verifyAdmin() {
            const password = document.getElementById('password').value;
            if (password === 'admin123') {
                closeModal();
                document.getElementById('adminSection').style.display = 'block';
                updateStockDisplay();
                displayOrders();
            } else {
                alert('Wrong password');
            }
        }
        
        function logoutAdmin() {
            document.getElementById('adminSection').style.display = 'none';
        }
        
        function addStock() {
            const size = document.getElementById('addSize').value;
            const qty = parseInt(document.getElementById('addQty').value);
            
            if (!qty || qty < 1) {
                alert('Enter valid quantity');
                return;
            }
            
            stock[size].quantity += qty;
            saveData();
            updateStockDisplay();
            alert(`‚úÖ Added ${qty} birds to ${size}kg`);
            document.getElementById('addQty').value = '';
        }
        
        function adjustStock(change) {
            const size = document.getElementById('adjustSize').value;
            const newQty = Math.max(0, stock[size].quantity + change);
            stock[size].quantity = newQty;
            saveData();
            updateStockDisplay();
            alert(`‚úÖ Stock updated to ${newQty}`);
        }
        
        function displayOrders() {
            let html = '';
            const recentOrders = orders.slice(0, 5);
            
            recentOrders.forEach(order => {
                html += `<div style="background: white; padding: 10px; margin: 10px 0; border-radius: 5px; border-left: 5px solid #ff9800;">
                            <strong>#${order.tracking}</strong> - ${order.name}<br>
                            ${order.qty}x ${order.size}kg - E${order.total}<br>
                            Status: ${order.status}<br>
                            <small>${order.timestamp}</small>
                        </div>`;
            });
            
            document.getElementById('ordersList').innerHTML = html || 'No orders yet';
        }
        
        // Event listeners
        document.getElementById('size').addEventListener('change', updatePrice);
        document.getElementById('quantity').addEventListener('input', updatePrice);
        
        // Initialize
        loadData();
        console.log('‚úÖ App ready! No Firebase needed!');
    </script>
</body>
</html>